{"version":3,"sources":["App.module.css","App.js","index.js"],"names":["module","exports","baseURL","window","location","href","axiosInstance","axios","create","console","log","App","state","s1","s2","actualS1","actualS2","parseLogs","data","sort","timestamp","map","Date","toLocaleString","value","pompWater","valveState","post","get","params","id","then","result","setState","length","toFixed","this","className","styles","app","sensorContent","onClick","width","height","chartType","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,IAAM,iBAAiB,cAAgB,6B,0KCInDC,EAAUC,OAAOC,SAASC,KAC1BC,EAAgBC,IAAMC,OAAO,CAAEN,YACrCO,QAAQC,IAAIR,G,IAoFGS,E,4MAlFbC,MAAQ,CACNC,GAAI,GACJC,GAAI,GACJC,SAAU,GACVC,SAAU,I,EAkCZC,UAAY,SAACC,GAAD,OACVA,EACGC,MAAK,SAACT,GAAD,OAASA,EAAIU,aAClBC,KAAI,SAACX,GAAD,MAAS,CAAC,IAAIY,KAAKZ,EAAIU,WAAWG,iBAAkBb,EAAIc,W,EAEjEC,UAAY,SAACC,GACXpB,EAAcqB,KAAK,aAAc,CAAED,gB,kEAtChB,IAAD,OAClBpB,EACGsB,IAAI,QAAS,CACZC,OAAQ,CACNC,GAAI,QAGPC,MAAK,SAACC,GACLvB,QAAQC,IAAIsB,EAAOd,MACnB,EAAKe,SAAS,CACZpB,GAAI,EAAKI,UAAUe,EAAOd,MAC1BH,SAAS,GAAD,QACsC,IAA5CiB,EAAOd,KAAKc,EAAOd,KAAKgB,OAAS,GAAGV,OACpCW,QAAQ,GAFF,UAKd7B,EACGsB,IAAI,QAAS,CACZC,OAAQ,CACNC,GAAI,QAGPC,MAAK,SAACC,GACL,EAAKC,SAAS,CACZnB,GAAI,EAAKG,UAAUe,EAAOd,MAC1BF,SAAS,GAAD,QACsC,IAA5CgB,EAAOd,KAAKc,EAAOd,KAAKgB,OAAS,GAAGV,OACpCW,QAAQ,GAFF,Y,+BAgBN,IAAD,SACgCC,KAAKxB,MAApCC,EADD,EACCA,GAAIC,EADL,EACKA,GAAIC,EADT,EACSA,SAAUC,EADnB,EACmBA,SAC1B,OACE,sBAAKqB,UAAWC,IAAOC,IAAvB,UACE,sBAAKF,UAAWC,IAAOE,cAAvB,UACE,gCACE,4CACA,8BAAMzB,IACN,wBAAQ0B,QAAS,kBAAM,EAAKhB,UAAU,IAAtC,uBAEF,cAAC,IAAD,CACEiB,MAAM,OACNC,OAAO,OACPzB,KAAI,CAAG,CAAC,GAAI,yBAAR,mBAA0BL,IAC9B+B,UAAU,YAGd,sBAAKP,UAAWC,IAAOE,cAAvB,UACE,gCACE,4CACA,8BAAMxB,IACN,wBAAQyB,QAAS,kBAAM,EAAKhB,UAAU,IAAtC,uBAEF,cAAC,IAAD,CACEiB,MAAM,OACNC,OAAO,OACPzB,KAAI,CAAG,CAAC,GAAI,yBAAR,mBAA0BJ,IAC9B8B,UAAU,mB,GA3EJC,aCHlBC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.f11758fa.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\",\"sensorContent\":\"App_sensorContent__6fObM\"};","import styles from \"./App.module.css\";\nimport { Component } from \"react\";\nimport { Chart } from \"react-google-charts\";\nimport axios from \"axios\";\n\nconst baseURL = window.location.href;\nconst axiosInstance = axios.create({ baseURL });\nconsole.log(baseURL);\nclass App extends Component {\n  state = {\n    s1: [],\n    s2: [],\n    actualS1: \"\",\n    actualS2: \"\",\n  };\n  componentDidMount() {\n    axiosInstance\n      .get(\"/logs\", {\n        params: {\n          id: \"s1\",\n        },\n      })\n      .then((result) => {\n        console.log(result.data);\n        this.setState({\n          s1: this.parseLogs(result.data),\n          actualS1: `${(\n            result.data[result.data.length - 1].value * 100\n          ).toFixed(1)}%`,\n        });\n      });\n    axiosInstance\n      .get(\"/logs\", {\n        params: {\n          id: \"s2\",\n        },\n      })\n      .then((result) => {\n        this.setState({\n          s2: this.parseLogs(result.data),\n          actualS2: `${(\n            result.data[result.data.length - 1].value * 100\n          ).toFixed(1)}%`,\n        });\n      });\n  }\n\n  parseLogs = (data) =>\n    data\n      .sort((log) => log.timestamp)\n      .map((log) => [new Date(log.timestamp).toLocaleString(), log.value]);\n\n  pompWater = (valveState) => {\n    axiosInstance.post(\"/pompWAter\", { valveState });\n  };\n\n  render() {\n    const { s1, s2, actualS1, actualS2 } = this.state;\n    return (\n      <div className={styles.app}>\n        <div className={styles.sensorContent}>\n          <div>\n            <div>Czujnik 1</div>\n            <div>{actualS1}</div>\n            <button onClick={() => this.pompWater(0)}>Podlej</button>\n          </div>\n          <Chart\n            width=\"100%\"\n            height=\"100%\"\n            data={[[\"\", \"wilgotność\"], ...s1]}\n            chartType=\"Line\"\n          />\n        </div>\n        <div className={styles.sensorContent}>\n          <div>\n            <div>Czujnik 2</div>\n            <div>{actualS2}</div>\n            <button onClick={() => this.pompWater(1)}>Podlej</button>\n          </div>\n          <Chart\n            width=\"100%\"\n            height=\"100%\"\n            data={[[\"\", \"wilgotność\"], ...s2]}\n            chartType=\"Line\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}